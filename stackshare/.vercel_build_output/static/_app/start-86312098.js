var me=Object.defineProperty,ge=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var Z=(r,e,t)=>e in r?me(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,E=(r,e)=>{for(var t in e||(e={}))X.call(e,t)&&Z(r,t,e[t]);if(K)for(var t of K(e))Q.call(e,t)&&Z(r,t,e[t]);return r},G=(r,e)=>ge(r,we(e));var ee=(r,e)=>{var t={};for(var i in r)X.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&K)for(var i of K(r))e.indexOf(i)<0&&Q.call(r,i)&&(t[i]=r[i]);return t};import{S as be,i as ve,s as ye,d as L,v as ke,a as te,b as se,o as W,e as Ee,c as Re,f as Se,g as S,h as J,j as A,k as Pe,l as j,t as Le,m as je,n as $e,p as Oe,q as v,r as Ue,u as C,w as y,x as I,y as k,z as N,A as $,B as q,C as O,D,E as V,F as U,G as M,H as ne}from"./chunks/vendor-e79db4d0.js";const Ae=".svelte-kit/generated/root.svelte";function re(r){let e,t,i;const c=[r[1]||{}];var n=r[0][0];function o(f){let s={};for(let a=0;a<c.length;a+=1)s=N(s,c[a]);return{props:s,$$inline:!0}}n&&(e=new n(o()));const l={c:function(){e&&$(e.$$.fragment),t=v()},l:function(s){e&&q(e.$$.fragment,s),t=v()},m:function(s,a){e&&O(e,s,a),j(s,t,a),i=!0},p:function(s,a){const d=a&2?D(c,[V(s[1]||{})]):{};if(n!==(n=s[0][0])){if(e){C();const u=e;y(u.$$.fragment,1,0,()=>{U(u,1)}),I()}n?(e=new n(o()),$(e.$$.fragment),k(e.$$.fragment,1),O(e,t.parentNode,t)):e=null}else n&&e.$set(d)},i:function(s){i||(e&&k(e.$$.fragment,s),i=!0)},o:function(s){e&&y(e.$$.fragment,s),i=!1},d:function(s){s&&S(t),e&&U(e,s)}};return L("SvelteRegisterBlock",{block:l,id:re.name,type:"else",source:"(46:0) {:else}",ctx:r}),l}function ie(r){let e,t,i;const c=[r[1]||{}];var n=r[0][0];function o(f){let s={$$slots:{default:[le]},$$scope:{ctx:f}};for(let a=0;a<c.length;a+=1)s=N(s,c[a]);return{props:s,$$inline:!0}}n&&(e=new n(o(r)));const l={c:function(){e&&$(e.$$.fragment),t=v()},l:function(s){e&&q(e.$$.fragment,s),t=v()},m:function(s,a){e&&O(e,s,a),j(s,t,a),i=!0},p:function(s,a){const d=a&2?D(c,[V(s[1]||{})]):{};if(a&525&&(d.$$scope={dirty:a,ctx:s}),n!==(n=s[0][0])){if(e){C();const u=e;y(u.$$.fragment,1,0,()=>{U(u,1)}),I()}n?(e=new n(o(s)),$(e.$$.fragment),k(e.$$.fragment,1),O(e,t.parentNode,t)):e=null}else n&&e.$set(d)},i:function(s){i||(e&&k(e.$$.fragment,s),i=!0)},o:function(s){e&&y(e.$$.fragment,s),i=!1},d:function(s){s&&S(t),e&&U(e,s)}};return L("SvelteRegisterBlock",{block:l,id:ie.name,type:"if",source:"(36:0) {#if components[1]}",ctx:r}),l}function oe(r){let e,t,i;const c=[r[2]||{}];var n=r[0][1];function o(f){let s={};for(let a=0;a<c.length;a+=1)s=N(s,c[a]);return{props:s,$$inline:!0}}n&&(e=new n(o()));const l={c:function(){e&&$(e.$$.fragment),t=v()},l:function(s){e&&q(e.$$.fragment,s),t=v()},m:function(s,a){e&&O(e,s,a),j(s,t,a),i=!0},p:function(s,a){const d=a&4?D(c,[V(s[2]||{})]):{};if(n!==(n=s[0][1])){if(e){C();const u=e;y(u.$$.fragment,1,0,()=>{U(u,1)}),I()}n?(e=new n(o()),$(e.$$.fragment),k(e.$$.fragment,1),O(e,t.parentNode,t)):e=null}else n&&e.$set(d)},i:function(s){i||(e&&k(e.$$.fragment,s),i=!0)},o:function(s){e&&y(e.$$.fragment,s),i=!1},d:function(s){s&&S(t),e&&U(e,s)}};return L("SvelteRegisterBlock",{block:l,id:oe.name,type:"else",source:"(42:2) {:else}",ctx:r}),l}function ae(r){let e,t,i;const c=[r[2]||{}];var n=r[0][1];function o(f){let s={$$slots:{default:[ce]},$$scope:{ctx:f}};for(let a=0;a<c.length;a+=1)s=N(s,c[a]);return{props:s,$$inline:!0}}n&&(e=new n(o(r)));const l={c:function(){e&&$(e.$$.fragment),t=v()},l:function(s){e&&q(e.$$.fragment,s),t=v()},m:function(s,a){e&&O(e,s,a),j(s,t,a),i=!0},p:function(s,a){const d=a&4?D(c,[V(s[2]||{})]):{};if(a&521&&(d.$$scope={dirty:a,ctx:s}),n!==(n=s[0][1])){if(e){C();const u=e;y(u.$$.fragment,1,0,()=>{U(u,1)}),I()}n?(e=new n(o(s)),$(e.$$.fragment),k(e.$$.fragment,1),O(e,t.parentNode,t)):e=null}else n&&e.$set(d)},i:function(s){i||(e&&k(e.$$.fragment,s),i=!0)},o:function(s){e&&y(e.$$.fragment,s),i=!1},d:function(s){s&&S(t),e&&U(e,s)}};return L("SvelteRegisterBlock",{block:l,id:ae.name,type:"if",source:"(38:2) {#if components[2]}",ctx:r}),l}function ce(r){let e,t,i;const c=[r[3]||{}];var n=r[0][2];function o(f){let s={};for(let a=0;a<c.length;a+=1)s=N(s,c[a]);return{props:s,$$inline:!0}}n&&(e=new n(o()));const l={c:function(){e&&$(e.$$.fragment),t=v()},l:function(s){e&&q(e.$$.fragment,s),t=v()},m:function(s,a){e&&O(e,s,a),j(s,t,a),i=!0},p:function(s,a){const d=a&8?D(c,[V(s[3]||{})]):{};if(n!==(n=s[0][2])){if(e){C();const u=e;y(u.$$.fragment,1,0,()=>{U(u,1)}),I()}n?(e=new n(o()),$(e.$$.fragment),k(e.$$.fragment,1),O(e,t.parentNode,t)):e=null}else n&&e.$set(d)},i:function(s){i||(e&&k(e.$$.fragment,s),i=!0)},o:function(s){e&&y(e.$$.fragment,s),i=!1},d:function(s){s&&S(t),e&&U(e,s)}};return L("SvelteRegisterBlock",{block:l,id:ce.name,type:"slot",source:"(39:3) <svelte:component this={components[1]} {...(props_1 || {})}>",ctx:r}),l}function le(r){let e,t,i,c;const n=[ae,oe],o=[];function l(s,a){return s[0][2]?0:1}e=l(r),t=o[e]=n[e](r);const f={c:function(){t.c(),i=v()},l:function(a){t.l(a),i=v()},m:function(a,d){o[e].m(a,d),j(a,i,d),c=!0},p:function(a,d){let u=e;e=l(a),e===u?o[e].p(a,d):(C(),y(o[u],1,1,()=>{o[u]=null}),I(),t=o[e],t?t.p(a,d):(t=o[e]=n[e](a),t.c()),k(t,1),t.m(i.parentNode,i))},i:function(a){c||(k(t),c=!0)},o:function(a){y(t),c=!1},d:function(a){o[e].d(a),a&&S(i)}};return L("SvelteRegisterBlock",{block:f,id:le.name,type:"slot",source:"(37:1) <svelte:component this={components[0]} {...(props_0 || {})}>",ctx:r}),f}function z(r){let e,t=r[5]&&Y(r);const i={c:function(){e=Ee("div"),t&&t.c(),this.h()},l:function(n){e=Re(n,"DIV",{id:!0,"aria-live":!0,"aria-atomic":!0,style:!0});var o=Se(e);t&&t.l(o),o.forEach(S),this.h()},h:function(){J(e,"id","svelte-announcer"),J(e,"aria-live","assertive"),J(e,"aria-atomic","true"),A(e,"position","absolute"),A(e,"left","0"),A(e,"top","0"),A(e,"clip","rect(0 0 0 0)"),A(e,"clip-path","inset(50%)"),A(e,"overflow","hidden"),A(e,"white-space","nowrap"),A(e,"width","1px"),A(e,"height","1px"),Pe(e,Ae,50,1,1140)},m:function(n,o){j(n,e,o),t&&t.m(e,null)},p:function(n,o){n[5]?t?t.p(n,o):(t=Y(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d:function(n){n&&S(e),t&&t.d()}};return L("SvelteRegisterBlock",{block:i,id:z.name,type:"if",source:"(50:0) {#if mounted}",ctx:r}),i}function Y(r){let e;const t={c:function(){e=Le(r[6])},l:function(c){e=je(c,r[6])},m:function(c,n){j(c,e,n)},p:function(c,n){n&64&&$e(e,c[6])},d:function(c){c&&S(e)}};return L("SvelteRegisterBlock",{block:t,id:Y.name,type:"if",source:"(52:2) {#if navigated}",ctx:r}),t}function F(r){let e,t,i,c,n;const o=[ie,re],l=[];function f(d,u){return d[0][1]?0:1}e=f(r),t=l[e]=o[e](r);let s=r[4]&&z(r);const a={c:function(){t.c(),i=Oe(),s&&s.c(),c=v()},l:function(u){t.l(u),i=Ue(u),s&&s.l(u),c=v()},m:function(u,p){l[e].m(u,p),j(u,i,p),s&&s.m(u,p),j(u,c,p),n=!0},p:function(u,[p]){let m=e;e=f(u),e===m?l[e].p(u,p):(C(),y(l[m],1,1,()=>{l[m]=null}),I(),t=l[e],t?t.p(u,p):(t=l[e]=o[e](u),t.c()),k(t,1),t.m(i.parentNode,i)),u[4]?s?s.p(u,p):(s=z(u),s.c(),s.m(c.parentNode,c)):s&&(s.d(1),s=null)},i:function(u){n||(k(t),n=!0)},o:function(u){y(t),n=!1},d:function(u){l[e].d(u),u&&S(i),s&&s.d(u),u&&S(c)}};return L("SvelteRegisterBlock",{block:a,id:F.name,type:"component",source:"",ctx:r}),a}function Te(r,e,t){let{$$slots:i={},$$scope:c}=e;ke("Root",i,[]);let{stores:n}=e,{page:o}=e,{components:l}=e,{props_0:f=null}=e,{props_1:s=null}=e,{props_2:a=null}=e;te("__svelte__",n),se(n.page.notify);let d=!1,u=!1,p=null;W(()=>{const h=n.page.subscribe(()=>{d&&(t(5,u=!0),t(6,p=document.title||"untitled page"))});return t(4,d=!0),h});const m=["stores","page","components","props_0","props_1","props_2"];return Object.keys(e).forEach(h=>{!~m.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Root> was created with unknown prop '${h}'`)}),r.$$set=h=>{"stores"in h&&t(7,n=h.stores),"page"in h&&t(8,o=h.page),"components"in h&&t(0,l=h.components),"props_0"in h&&t(1,f=h.props_0),"props_1"in h&&t(2,s=h.props_1),"props_2"in h&&t(3,a=h.props_2)},r.$capture_state=()=>({setContext:te,afterUpdate:se,onMount:W,stores:n,page:o,components:l,props_0:f,props_1:s,props_2:a,mounted:d,navigated:u,title:p}),r.$inject_state=h=>{"stores"in h&&t(7,n=h.stores),"page"in h&&t(8,o=h.page),"components"in h&&t(0,l=h.components),"props_0"in h&&t(1,f=h.props_0),"props_1"in h&&t(2,s=h.props_1),"props_2"in h&&t(3,a=h.props_2),"mounted"in h&&t(4,d=h.mounted),"navigated"in h&&t(5,u=h.navigated),"title"in h&&t(6,p=h.title)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),r.$$.update=()=>{r.$$.dirty&384&&n.page.set(o)},[l,f,s,a,d,u,p,n,o]}class Ce extends be{constructor(e){super(e);ve(this,e,Te,F,ye,{stores:7,page:8,components:0,props_0:1,props_1:2,props_2:3}),L("SvelteRegisterComponent",{component:this,tagName:"Root",options:e,id:F.name});const{ctx:t}=this.$$,i=e.props||{};t[7]===void 0&&!("stores"in i)&&console.warn("<Root> was created without expected prop 'stores'"),t[8]===void 0&&!("page"in i)&&console.warn("<Root> was created without expected prop 'page'"),t[0]===void 0&&!("components"in i)&&console.warn("<Root> was created without expected prop 'components'")}get stores(){throw new Error("<Root>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set stores(e){throw new Error("<Root>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get page(){throw new Error("<Root>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set page(e){throw new Error("<Root>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get components(){throw new Error("<Root>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set components(e){throw new Error("<Root>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get props_0(){throw new Error("<Root>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set props_0(e){throw new Error("<Root>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get props_1(){throw new Error("<Root>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set props_1(e){throw new Error("<Root>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get props_2(){throw new Error("<Root>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set props_2(e){throw new Error("<Root>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ie="modulepreload",ue={},Ne="/_app/",T=function(e,t){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=`${Ne}${i}`,i in ue)return;ue[i]=!0;const c=i.endsWith(".css"),n=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${n}`))return;const o=document.createElement("link");if(o.rel=c?"stylesheet":Ie,c||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),c)return new Promise((l,f)=>{o.addEventListener("load",l),o.addEventListener("error",f)})})).then(()=>e())},_=[()=>T(()=>import("./pages/__layout.svelte-bcf1a372.js"),["pages/__layout.svelte-bcf1a372.js","assets/pages/__layout.svelte-35a34268.css","chunks/vendor-e79db4d0.js","assets/vendor-62c95adb.css","chunks/stores-f688b8f5.js","chunks/routes.model-98ab3763.js","chunks/user-proxy.service-4293fed9.js"]),()=>T(()=>import("./pages/__error.svelte-5d7168a3.js"),["pages/__error.svelte-5d7168a3.js","assets/pages/__error.svelte-b05e7ebf.css","chunks/vendor-e79db4d0.js","assets/vendor-62c95adb.css"]),()=>T(()=>import("./pages/index.svelte-b718f603.js"),["pages/index.svelte-b718f603.js","assets/pages/index.svelte-7bf37d9d.css","chunks/vendor-e79db4d0.js","assets/vendor-62c95adb.css","chunks/routes.model-98ab3763.js","chunks/questions-proxy.service-a2f80bfd.js"]),()=>T(()=>import("./pages/authenticate/index.svelte-442c139f.js"),["pages/authenticate/index.svelte-442c139f.js","assets/pages/authenticate/index.svelte-1b57fb2b.css","chunks/vendor-e79db4d0.js","assets/vendor-62c95adb.css","chunks/routes.model-98ab3763.js","chunks/user-proxy.service-4293fed9.js"]),()=>T(()=>import("./pages/questions/index.svelte-2cdfaa21.js"),["pages/questions/index.svelte-2cdfaa21.js","assets/pages/questions/index.svelte-a540830f.css","chunks/vendor-e79db4d0.js","assets/vendor-62c95adb.css"]),()=>T(()=>import("./pages/questions/_question_.svelte-1af4370e.js"),["pages/questions/_question_.svelte-1af4370e.js","assets/pages/questions/_question_.svelte-8b605e24.css","chunks/vendor-e79db4d0.js","assets/vendor-62c95adb.css","chunks/stores-f688b8f5.js","chunks/routes.model-98ab3763.js","chunks/questions-proxy.service-a2f80bfd.js","chunks/user-proxy.service-4293fed9.js"]),()=>T(()=>import("./pages/profile/index.svelte-87e0b9f7.js"),["pages/profile/index.svelte-87e0b9f7.js","assets/pages/profile/index.svelte-81c41949.css","chunks/vendor-e79db4d0.js","assets/vendor-62c95adb.css","chunks/routes.model-98ab3763.js","chunks/user-proxy.service-4293fed9.js"]),()=>T(()=>import("./pages/add/question/index.svelte-d41f3dee.js"),["pages/add/question/index.svelte-d41f3dee.js","assets/pages/add/question/index.svelte-f9283e84.css","chunks/vendor-e79db4d0.js","assets/vendor-62c95adb.css","chunks/questions-proxy.service-a2f80bfd.js","chunks/routes.model-98ab3763.js","chunks/user-proxy.service-4293fed9.js"])],qe=decodeURIComponent,De=[[/^\/$/,[_[0],_[2]],[_[1]]],[/^\/authenticate\/?$/,[_[0],_[3]],[_[1]]],[/^\/questions\/?$/,[_[0],_[4]],[_[1]]],[/^\/questions\/([^/]+?)\/?$/,[_[0],_[5]],[_[1]],r=>({question:qe(r[1])})],[/^\/profile\/?$/,[_[0],_[6]],[_[1]]],[/^\/add\/question\/?$/,[_[0],_[7]],[_[1]]]],Ve=[_[0](),_[1]()];function Be(r){let e=r.baseURI;if(!e){const t=r.getElementsByTagName("base");e=t.length?t[0].href:r.URL}return e}let fe="";function xe(r){fe=r.base,r.assets}function H(){return{x:pageXOffset,y:pageYOffset}}function de(r){return r.composedPath().find(t=>t instanceof Node&&t.nodeName.toUpperCase()==="A")}function he(r){return r instanceof SVGAElement?new URL(r.href.baseVal,document.baseURI):new URL(r.href)}class Ke{constructor({base:e,routes:t,trailing_slash:i,renderer:c}){var n,o;this.base=e,this.routes=t,this.trailing_slash=i,this.navigating=0,this.renderer=c,c.router=this,this.enabled=!0,document.body.setAttribute("tabindex","-1"),this.current_history_index=(o=(n=history.state)==null?void 0:n["sveltekit:index"])!=null?o:0,this.current_history_index===0&&history.replaceState(G(E({},history.state),{"sveltekit:index":0}),"",location.href),this.callbacks={before_navigate:[],after_navigate:[]}}init_listeners(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),addEventListener("beforeunload",n=>{let o=!1;const l={from:this.renderer.current.url,to:null,cancel:()=>o=!0};this.callbacks.before_navigate.forEach(f=>f(l)),o?(n.preventDefault(),n.returnValue=""):history.scrollRestoration="auto"}),addEventListener("load",()=>{history.scrollRestoration="manual"});let e;addEventListener("scroll",()=>{clearTimeout(e),e=setTimeout(()=>{const n=G(E({},history.state||{}),{"sveltekit:scroll":H()});history.replaceState(n,document.title,window.location.href)},200)});const t=n=>{const o=de(n);o&&o.href&&o.hasAttribute("sveltekit:prefetch")&&this.prefetch(he(o))};let i;const c=n=>{clearTimeout(i),i=setTimeout(()=>{var o;(o=n.target)==null||o.dispatchEvent(new CustomEvent("sveltekit:trigger_prefetch",{bubbles:!0}))},20)};addEventListener("touchstart",t),addEventListener("mousemove",c),addEventListener("sveltekit:trigger_prefetch",t),addEventListener("click",n=>{if(!this.enabled||n.button||n.which!==1||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey||n.defaultPrevented)return;const o=de(n);if(!o||!o.href)return;const l=he(o);if(l.toString()===location.href){location.hash||n.preventDefault();return}const s=(o.getAttribute("rel")||"").split(/\s+/);if(!(o.hasAttribute("download")||s&&s.includes("external"))&&!(o instanceof SVGAElement?o.target.baseVal:o.target)){if(l.href.split("#")[0]===location.href.split("#")[0]){setTimeout(()=>history.pushState({},"",l.href));const a=this.parse(l);return a?this.renderer.update(a,[],!1):void 0}this._navigate({url:l,scroll:o.hasAttribute("sveltekit:noscroll")?H():null,keepfocus:!1,chain:[],details:{state:{},replaceState:!1},accepted:()=>n.preventDefault(),blocked:()=>n.preventDefault()})}}),addEventListener("popstate",n=>{if(n.state&&this.enabled){if(n.state["sveltekit:index"]===this.current_history_index)return;this._navigate({url:new URL(location.href),scroll:n.state["sveltekit:scroll"],keepfocus:!1,chain:[],details:null,accepted:()=>{this.current_history_index=n.state["sveltekit:index"]},blocked:()=>{const o=this.current_history_index-n.state["sveltekit:index"];history.go(o)}})}})}owns(e){return e.origin===location.origin&&e.pathname.startsWith(this.base)}parse(e){if(this.owns(e)){const t=decodeURI(e.pathname.slice(this.base.length)||"/");return{id:e.pathname+e.search,routes:this.routes.filter(([i])=>i.test(t)),url:e,path:t}}}async goto(e,{noscroll:t=!1,replaceState:i=!1,keepfocus:c=!1,state:n={}}={},o){const l=new URL(e,Be(document));return this.enabled?this._navigate({url:l,scroll:t?H():null,keepfocus:c,chain:o,details:{state:n,replaceState:i},accepted:()=>{},blocked:()=>{}}):(location.href=l.href,new Promise(()=>{}))}enable(){this.enabled=!0}disable(){this.enabled=!1}async prefetch(e){const t=this.parse(e);if(!t)throw new Error("Attempted to prefetch a URL that does not belong to this app");return this.renderer.load(t)}after_navigate(e){W(()=>(this.callbacks.after_navigate.push(e),()=>{const t=this.callbacks.after_navigate.indexOf(e);this.callbacks.after_navigate.splice(t,1)}))}before_navigate(e){W(()=>(this.callbacks.before_navigate.push(e),()=>{const t=this.callbacks.before_navigate.indexOf(e);this.callbacks.before_navigate.splice(t,1)}))}async _navigate({url:e,scroll:t,keepfocus:i,chain:c,details:n,accepted:o,blocked:l}){const f=this.renderer.current.url;let s=!1;const a={from:f,to:e,cancel:()=>s=!0};if(this.callbacks.before_navigate.forEach(p=>p(a)),s){l();return}const d=this.parse(e);if(!d)return location.href=e.href,new Promise(()=>{});o(),this.navigating||dispatchEvent(new CustomEvent("sveltekit:navigation-start")),this.navigating++;let{pathname:u}=e;if(this.trailing_slash==="never"?u!=="/"&&u.endsWith("/")&&(u=u.slice(0,-1)):this.trailing_slash==="always"&&!e.pathname.split("/").pop().includes(".")&&!u.endsWith("/")&&(u+="/"),d.url=new URL(e.origin+u+e.search+e.hash),n){const p=n.replaceState?0:1;n.state["sveltekit:index"]=this.current_history_index+=p,history[n.replaceState?"replaceState":"pushState"](n.state,"",d.url)}if(await this.renderer.handle_navigation(d,c,!1,{scroll:t,keepfocus:i}),this.navigating--,!this.navigating){dispatchEvent(new CustomEvent("sveltekit:navigation-end"));const p={from:f,to:e};this.callbacks.after_navigate.forEach(m=>m(p))}}}function pe(r){return r instanceof Error||r&&r.name&&r.message?r:new Error(JSON.stringify(r))}function We(r){let e=5381,t=r.length;if(typeof r=="string")for(;t;)e=e*33^r.charCodeAt(--t);else for(;t;)e=e*33^r[--t];return(e>>>0).toString(36)}function Ge(r){const e=r.status&&r.status>=400&&r.status<=599&&!r.redirect;if(r.error||e){const t=r.status;if(!r.error&&e)return{status:t||500,error:new Error};const i=typeof r.error=="string"?new Error(r.error):r.error;return i instanceof Error?!t||t<400||t>599?(console.warn('"error" returned from load() without a valid status code \u2014 defaulting to 500'),{status:500,error:i}):{status:t,error:i}:{status:500,error:new Error(`"error" property returned from load() must be a string or instance of Error, received type "${typeof i}"`)}}if(r.redirect){if(!r.status||Math.floor(r.status/100)!==3)return{status:500,error:new Error('"redirect" property returned from load() must be accompanied by a 3xx status code')};if(typeof r.redirect!="string")return{status:500,error:new Error('"redirect" property returned from load() must be a string')}}if(r.context)throw new Error('You are returning "context" from a load function. "context" was renamed to "stuff", please adjust your code accordingly.');return r}function _e(r){const e=M(r);let t=!0;function i(){t=!0,e.update(o=>o)}function c(o){t=!1,e.set(o)}function n(o){let l;return e.subscribe(f=>{(l===void 0||t&&f!==l)&&o(l=f)})}return{notify:i,set:c,subscribe:n}}function Je(r,e){const t=typeof r=="string"?r:r.url;let i=`script[data-type="svelte-data"][data-url=${JSON.stringify(t)}]`;e&&typeof e.body=="string"&&(i+=`[data-body="${We(e.body)}"]`);const c=document.querySelector(i);if(c&&c.textContent){const n=JSON.parse(c.textContent),{body:o}=n,l=ee(n,["body"]);return Promise.resolve(new Response(o,l))}return fetch(r,e)}class Me{constructor({Root:e,fallback:t,target:i,session:c}){this.Root=e,this.fallback=t,this.router,this.target=i,this.started=!1,this.session_id=1,this.invalid=new Set,this.invalidating=null,this.autoscroll=!0,this.updating=!1,this.current={url:null,session_id:0,branch:[]},this.cache=new Map,this.loading={id:null,promise:null},this.stores={url:_e({}),page:_e({}),navigating:M(null),session:M(c)},this.$session=null,this.root=null;let n=!1;this.stores.session.subscribe(async o=>{if(this.$session=o,!n||!this.router)return;this.session_id+=1;const l=this.router.parse(new URL(location.href));l&&this.update(l,[],!0)}),n=!0}disable_scroll_handling(){if(this.started&&!this.updating)throw new Error("Can only disable scroll handling during navigation");(this.updating||!this.started)&&(this.autoscroll=!1)}async start({status:e,error:t,nodes:i,url:c,params:n}){const o=[];let l={},f,s;c.hash=window.location.hash;try{for(let a=0;a<i.length;a+=1){const d=a===i.length-1,u=await this._load_node({module:await i[a],url:c,params:n,stuff:l,status:d?e:void 0,error:d?t:void 0});if(o.push(u),u&&u.loaded)if(u.loaded.error){if(t)throw u.loaded.error;s={status:u.loaded.status,error:u.loaded.error,url:c}}else u.loaded.stuff&&(l=E(E({},l),u.loaded.stuff))}f=s?await this._load_error(s):await this._get_navigation_result_from_branch({url:c,params:n,stuff:l,branch:o,status:e,error:t})}catch(a){if(t)throw a;f=await this._load_error({status:500,error:pe(a),url:c})}if(f.redirect){location.href=new URL(f.redirect,location.href).href;return}this._init(f)}async handle_navigation(e,t,i,c){this.started&&this.stores.navigating.set({from:this.current.url,to:e.url}),await this.update(e,t,i,c)}async update(e,t,i,c){var f;const n=this.token={};let o=await this._get_navigation_result(e,i);if(n!==this.token)return;if(this.invalid.clear(),o.redirect)if(t.length>10||t.includes(e.url.pathname))o=await this._load_error({status:500,error:new Error("Redirect loop"),url:e.url});else{this.router?this.router.goto(new URL(o.redirect,e.url).href,{replaceState:!0},[...t,e.url.pathname]):location.href=new URL(o.redirect,location.href).href;return}if(this.updating=!0,this.started?(this.current=o.state,this.root.$set(o.props),this.stores.navigating.set(null)):this._init(o),c){const{scroll:s,keepfocus:a}=c;if(a||((f=getSelection())==null||f.removeAllRanges(),document.body.focus()),await ne(),this.autoscroll){const d=e.url.hash&&document.getElementById(e.url.hash.slice(1));s?scrollTo(s.x,s.y):d?d.scrollIntoView():scrollTo(0,0)}}else await ne();if(this.loading.promise=null,this.loading.id=null,this.autoscroll=!0,this.updating=!1,!this.router)return;const l=o.state.branch[o.state.branch.length-1];l&&l.module.router===!1?this.router.disable():this.router.enable()}load(e){return this.loading.promise=this._get_navigation_result(e,!1),this.loading.id=e.id,this.loading.promise}invalidate(e){return this.invalid.add(e),this.invalidating||(this.invalidating=Promise.resolve().then(async()=>{const t=this.router&&this.router.parse(new URL(location.href));t&&await this.update(t,[],!0),this.invalidating=null})),this.invalidating}_init(e){this.current=e.state;const t=document.querySelector("style[data-svelte]");if(t&&t.remove(),this.root=new this.Root({target:this.target,props:E({stores:this.stores},e.props),hydrate:!0}),this.started=!0,this.router){const i={from:null,to:new URL(location.href)};this.router.callbacks.after_navigate.forEach(c=>c(i))}}async _get_navigation_result(e,t){if(this.loading.id===e.id&&this.loading.promise)return this.loading.promise;for(let i=0;i<e.routes.length;i+=1){const c=e.routes[i];let n=i+1;for(;n<e.routes.length;){const l=e.routes[n];if(l[0].toString()===c[0].toString())l[1].forEach(f=>f()),n+=1;else break}const o=await this._load({route:c,info:e},t);if(o)return o}return await this._load_error({status:404,error:new Error(`Not found: ${e.url.pathname}`),url:e.url})}async _get_navigation_result_from_branch({url:e,params:t,stuff:i,branch:c,status:n,error:o}){const l=c.filter(Boolean),f=l.find(u=>u.loaded&&u.loaded.redirect),s={redirect:f&&f.loaded?f.loaded.redirect:void 0,state:{url:e,params:t,branch:c,session_id:this.session_id},props:{components:l.map(u=>u.module.default)}};for(let u=0;u<l.length;u+=1){const p=l[u].loaded;s.props[`props_${u}`]=p?await p.props:null}if(!this.current.url||e.href!==this.current.url.href){s.props.page={url:e,params:t,status:n,error:o,stuff:i};const u=(p,m)=>{Object.defineProperty(s.props.page,p,{get:()=>{throw new Error(`$page.${p} has been replaced by $page.url.${m}`)}})};u("origin","origin"),u("path","pathname"),u("query","searchParams")}const a=l[l.length-1],d=a.loaded&&a.loaded.maxage;if(d){const u=e.pathname+e.search;let p=!1;const m=()=>{this.cache.get(u)===s&&this.cache.delete(u),P(),clearTimeout(h)},h=setTimeout(m,d*1e3),P=this.stores.session.subscribe(()=>{p&&m()});p=!0,this.cache.set(u,s)}return s}async _load_node({status:e,error:t,module:i,url:c,params:n,stuff:o}){const l={module:i,uses:{params:new Set,url:!1,session:!1,stuff:!1,dependencies:[]},loaded:null,stuff:o},f={};for(const a in n)Object.defineProperty(f,a,{get(){return l.uses.params.add(a),n[a]},enumerable:!0});const s=this.$session;if(i.load){const{started:a}=this,d={params:f,get url(){return l.uses.url=!0,c},get session(){return l.uses.session=!0,s},get stuff(){return l.uses.stuff=!0,E({},o)},fetch(p,m){const h=typeof p=="string"?p:p.url,{href:P}=new URL(h,c);return l.uses.dependencies.push(P),a?fetch(p,m):Je(p,m)}};Object.defineProperty(d,"page",{get:()=>{throw new Error("`page` in `load` functions has been replaced by `url` and `params`")}}),t&&(d.status=e,d.error=t);const u=await i.load.call(null,d);if(!u)throw new Error("load function must return a value");l.loaded=Ge(u),l.loaded.stuff&&(l.stuff=l.loaded.stuff)}return l}async _load({route:e,info:{url:t,path:i}},c){const n=t.pathname+t.search;if(!c){const g=this.cache.get(n);if(g)return g}const[o,l,f,s]=e,a=s?s(o.exec(i)):{},d=this.current.url&&{url:n!==this.current.url.pathname+this.current.url.search,params:Object.keys(a).filter(g=>this.current.params[g]!==a[g]),session:this.session_id!==this.current.session_id};let u=[],p={},m=!1,h=200,P;l.forEach(g=>g());e:for(let g=0;g<l.length;g+=1){let w;try{if(!l[g])continue;const b=await l[g](),R=this.current.branch[g];if(!R||b!==R.module||d.url&&R.uses.url||d.params.some(x=>R.uses.params.has(x))||d.session&&R.uses.session||R.uses.dependencies.some(x=>this.invalid.has(x))||m&&R.uses.stuff){if(w=await this._load_node({module:b,url:t,params:a,stuff:p}),w&&w.loaded){if(w.loaded.fallthrough)return;if(w.loaded.error&&(h=w.loaded.status,P=w.loaded.error),w.loaded.redirect)return{redirect:w.loaded.redirect,props:{},state:this.current};w.loaded.stuff&&(m=!0)}}else w=R}catch(b){h=500,P=pe(b)}if(P){for(;g--;)if(f[g]){let b,R,B=g;for(;!(R=u[B]);)B-=1;try{if(b=await this._load_node({status:h,error:P,module:await f[g](),url:t,params:a,stuff:R.stuff}),b&&b.loaded&&b.loaded.error)continue;b&&b.loaded&&b.loaded.stuff&&(p=E(E({},p),b.loaded.stuff)),u=u.slice(0,B+1).concat(b);break e}catch{continue}}return await this._load_error({status:h,error:P,url:t})}else w&&w.loaded&&w.loaded.stuff&&(p=E(E({},p),w.loaded.stuff)),u.push(w)}return await this._get_navigation_result_from_branch({url:t,params:a,stuff:p,branch:u,status:h,error:P})}async _load_error({status:e,error:t,url:i}){var s,a;const c={},n=await this._load_node({module:await this.fallback[0],url:i,params:c,stuff:{}}),o=await this._load_node({status:e,error:t,module:await this.fallback[1],url:i,params:c,stuff:n&&n.loaded&&n.loaded.stuff||{}}),l=[n,o],f=E(E({},(s=n==null?void 0:n.loaded)==null?void 0:s.stuff),(a=o==null?void 0:o.loaded)==null?void 0:a.stuff);return await this._get_navigation_result_from_branch({url:i,params:c,stuff:f,branch:l,status:e,error:t})}}async function Fe({paths:r,target:e,session:t,route:i,spa:c,trailing_slash:n,hydrate:o}){if(!e)throw new Error("Missing target element. See https://kit.svelte.dev/docs#configuration-target");const l=new Me({Root:Ce,fallback:Ve,target:e,session:t}),f=i?new Ke({base:r.base,routes:De,trailing_slash:n,renderer:l}):null;xe(r),o&&await l.start(o),f&&(c&&f.goto(location.href,{replaceState:!0},[]),f.init_listeners()),dispatchEvent(new CustomEvent("sveltekit:start"))}export{Fe as start};
